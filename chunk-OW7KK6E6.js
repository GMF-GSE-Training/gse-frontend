import{a as re}from"./chunk-VCYNDTNL.js";import{a as ee,c as te,d as ie,e as ne}from"./chunk-LLJUXWRW.js";import{a as S}from"./chunk-ERSWCUUE.js";import{c as K,d as Q,e as Z,f as G,g as H,k as J,l as Y,n as X,o as $}from"./chunk-HA77R4EW.js";import{b as W,d as B,e as j,g as D,l as A,u as k,z}from"./chunk-PTR267HX.js";import{Cb as F,Db as O,Eb as I,Fb as q,Gb as g,Hb as R,Kb as c,Lb as h,Mb as f,Na as l,Ob as N,Qb as L,R as V,Sa as U,W as x,Xa as M,ab as C,ba as m,ca as d,hb as r,ka as v,nb as a,ob as p,pb as y,sb as P,vb as _,wb as w,xb as T,yb as E}from"./chunk-NHTCOLVS.js";var le=["*"],pe=()=>["/auth/login"],se=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=M({type:i,selectors:[["app-auth"]],ngContentSelectors:le,decls:8,vars:2,consts:[[1,"auth-container"],[3,"routerLink"],["src","assets/image/logo-GMF.png","alt","logo","aria-hidden","true",1,"brand-logo"],[1,"auth-description"],[1,"form-container"]],template:function(o,e){o&1&&(T(),a(0,"div",0)(1,"a",1),y(2,"img",2),p(),a(3,"div",3)(4,"h1"),g(5,"Enter Your Account Information to Proceed."),p()(),a(6,"div",4),E(7),p()()),o&2&&(l(),r("routerLink",N(1,pe)))},dependencies:[z,k],styles:[".auth-container[_ngcontent-%COMP%]{background-color:#02507e;display:flex;align-items:center;gap:2em;min-height:100vh;width:100%;overflow-x:hidden;position:relative}.auth-description[_ngcontent-%COMP%]{width:50%;padding:2em;display:flex;justify-content:center;align-items:center;text-align:left;color:#fff;font-size:2em}.brand-logo[_ngcontent-%COMP%]{width:235px;height:48px;position:absolute;top:52px;left:36px;cursor:pointer}.form-container[_ngcontent-%COMP%]{background-color:#fff;min-height:100vh;width:100%;border-bottom-left-radius:30px;border-top-left-radius:30px;display:flex;align-items:center;justify-content:center;overflow:auto}@media screen and (max-width: 1024px){.auth-description[_ngcontent-%COMP%]{font-size:25px}}@media screen and (max-width: 768px){.auth-container[_ngcontent-%COMP%]{padding:2em 0;flex-direction:column;gap:1em}.auth-description[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:1.5em;padding:1em}.brand-logo[_ngcontent-%COMP%]{position:static;width:200px;height:auto}.form-container[_ngcontent-%COMP%]{width:90%;min-height:auto;border-radius:20px;padding:2em 0 3em;box-shadow:0 4px 6px #0000001a}}@media screen and (max-width: 425px){.auth-description[_ngcontent-%COMP%]{font-size:20px}}"]})}}return i})();var ae=(()=>{class i{constructor(t){this.http=t,this.apiUrl=S.apiUrl,this.endpoints=S.endpoints.role}getAllRoles(){return this.http.get(`${this.apiUrl}/${this.endpoints.base}`,{withCredentials:!0})}static{this.\u0275fac=function(o){return new(o||i)(x(A))}}static{this.\u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var de=["form"],ue=(i,b)=>({"background-color":i,color:b});function ge(i,b){if(i&1&&(a(0,"div",24)(1,"span"),g(2),p()()),i&2){let t=w();r("ngStyle",L(2,ue,t.isSuccess?"":"#ffeeba",t.isSuccess?"":"red")),l(2),R(t.registerMessage)}}function ce(i,b){if(i&1){let t=P();a(0,"app-dropdown-input",25),_("selectionChange",function(e){m(t);let s=w();return d(s.onRoleSelected(e))}),p()}if(i&2){let t=w();r("isRequired",!0)("options",t.roleOptions)("initialValue",t.initialRole)}}function he(i,b){if(i&1){let t=P();a(0,"app-base-input",26,6),f("ngModelChange",function(e){m(t);let s=w();return h(s.user.nik,e)||(s.user.nik=e),d(e)}),p()}if(i&2){let t=w();r("isRequired",!0)("placeholder",t.isRegister?"Masukan NIK/Paspor":"Role user wajib mengisi NIK/Paspor"),c("ngModel",t.user.nik),r("required",t.isRegister)("restrictToPattern","^[0-9]+$")}}function fe(i,b){i&1&&(a(0,"span",27),g(1,"Sudah punya akun? "),a(2,"a",28),g(3,"Masuk"),p()())}function _e(i,b){i&1&&(a(0,"app-white-button",29),g(1,"Kembali"),p())}var We=(()=>{class i{passVisible(){this.isPassVisible=!this.isPassVisible}confirmPassVisible(){this.isConfirmPassVisible=!this.isConfirmPassVisible}checkPasswordMatch(){this.user.password&&this.user.confirmPassword&&(this.passwordMismatch=this.user.password!==this.user.confirmPassword,this.passwordMismatch?this.mismatchErrorMessage="Password tidak sama":this.mismatchErrorMessage="")}constructor(t){this.roleService=t,this.pageTitle="",this.user={},this.isRegister=!1,this.isResetPassword=!1,this.blueButtonLabel="Simpan",this.isCreate=!1,this.registerMessage="",this.isSuccess=!1,this.roleOptions=[],this.roleData=[],this.selectedRole="",this.initialRole="",this.isPassVisible=!1,this.isConfirmPassVisible=!1,this.passwordMismatch=!1,this.mismatchErrorMessage="",this.formSubmit=new v,this.cachedCurrentUser=localStorage.getItem("user_profile"),this.currentUserRole=""}ngOnInit(){this.cachedCurrentUser&&(this.currentUser=JSON.parse(this.cachedCurrentUser),this.currentUserRole=this.currentUser.role.name,this.roleService.getAllRoles().subscribe({next:t=>{this.roleData=t.data,this.roleOptions=t.data.map(o=>({label:o.name,value:o.id}))},error:t=>{console.log(t)}}))}onSubmit(){this.form.valid&&(this.isCreate?this.formSubmit.emit(this.user):(this.currentUserRole!=="super admin"&&(this.user.email=void 0),this.formSubmit.emit(this.user)))}onRoleSelected(t){this.selectedRole=this.roleData.find(o=>o.id===t).name,this.user.roleId=t,this.selectedRole!=="user"&&(this.user.nik=null)}static{this.\u0275fac=function(o){return new(o||i)(U(ae))}}static{this.\u0275cmp=M({type:i,selectors:[["app-user-form"]],viewQuery:function(o,e){if(o&1&&F(de,5),o&2){let s;O(s=I())&&(e.form=s.first)}},inputs:{pageTitle:"pageTitle",user:"user",isRegister:"isRegister",isResetPassword:"isResetPassword",blueButtonLabel:"blueButtonLabel",isCreate:"isCreate",registerMessage:"registerMessage",isSuccess:"isSuccess",initialRole:"initialRole"},outputs:{formSubmit:"formSubmit"},decls:25,vars:29,consts:[["form","ngForm"],["idNumber","ngModel"],["name","ngModel"],["email","ngModel"],["password","ngModel"],["confirmPassword","ngModel"],["nik","ngModel"],[1,"form-container"],[1,"form",3,"ngSubmit"],[3,"pageTitle"],["class","register-message",3,"ngStyle",4,"ngIf"],[1,"input-container"],["type","text","inputMode","tel","label","No Pegawai","autocomplete","off","placeholder","No Pegawai","name","idNumber",1,"input",3,"ngModelChange","ngModel"],["class","input","label","Role","placeholder","--- Pilih Role ---",3,"isRequired","options","initialValue","selectionChange",4,"ngIf"],["class","input","type","text","inputMode","tel","label","NIK/Paspor","autocomplete","off","name","nik","pattern","^[0-9]+$",3,"isRequired","placeholder","ngModel","required","restrictToPattern","ngModelChange",4,"ngIf"],["type","text","inputMode","text","label","Nama","autocomplete","off","placeholder","Masukkan nama asli, nama akan digunakan pada data sertifikat","name","name","required","","pattern","^[a-zA-Z ]+$","patternErrorMessage","Nama hanya boleh berisi huruf",1,"input",3,"ngModelChange","isRequired","ngModel","restrictToPattern"],["type","email","inputMode","email","label","Email","autocomplete","off","placeholder","Gunakan email aktif","name","email","required","",1,"input",3,"ngModelChange","isRequired","ngModel","email","disabled"],["inputMode","text","label","Password","autocomplete","off","placeholder","Password","name","password","minLength","8","pattern","^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]).+$","minLengthErrorMessage","Password harus berisi minimal 8 karakter dengan kombinasi huruf besar, huruf kecil, dan angka","patternErrorMessage","Password harus berisi minimal 8 karakter dengan kombinasi huruf besar, huruf kecil, dan angka",1,"input",3,"togglePassClick","ngModelChange","type","isPassVisible","isRequired","ngModel","required"],["inputMode","text","label","Konfirmasi Password","autocomplete","off","placeholder","Konfirmasi Password","name","confirmPassword","minLength","8","pattern","^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]).+$","minLengthErrorMessage","Konfirmasi Password harus berisi minimal 8 karakter dengan kombinasi huruf besar, huruf kecil, dan angka","patternErrorMessage","Konfirmasi Password harus berisi minimal 8 karakter dengan kombinasi huruf besar, huruf kecil, dan angka",1,"input",3,"togglePassClick","ngModelChange","type","isPassVisible","isRequired","ngModel","required","customErrorMessage"],["label","Dinas","autocomplete","off","type","text","inputMode","text","placeholder","Dinas","name","dinas",1,"input",3,"ngModelChange","ngModel"],["class","isRegistered",4,"ngIf"],[1,"buttons-container"],["class","button","type","button","routerLink","/users",4,"ngIf"],["type","submit",1,"button",3,"ngClass","disabled"],[1,"register-message",3,"ngStyle"],["label","Role","placeholder","--- Pilih Role ---",1,"input",3,"selectionChange","isRequired","options","initialValue"],["type","text","inputMode","tel","label","NIK/Paspor","autocomplete","off","name","nik","pattern","^[0-9]+$",1,"input",3,"ngModelChange","isRequired","placeholder","ngModel","required","restrictToPattern"],[1,"isRegistered"],["routerLink","/login"],["type","button","routerLink","/users",1,"button"]],template:function(o,e){if(o&1){let s=P();a(0,"app-auth")(1,"div",7)(2,"form",8,0),_("ngSubmit",function(){return m(s),d(e.onSubmit())}),y(4,"app-title",9),C(5,ge,3,5,"div",10),a(6,"div",11)(7,"app-base-input",12,1),f("ngModelChange",function(n){return m(s),h(e.user.idNumber,n)||(e.user.idNumber=n),d(n)}),p(),C(9,ce,1,3,"app-dropdown-input",13)(10,he,2,5,"app-base-input",14),a(11,"app-base-input",15,2),f("ngModelChange",function(n){return m(s),h(e.user.name,n)||(e.user.name=n),d(n)}),p(),a(13,"app-base-input",16,3),f("ngModelChange",function(n){return m(s),h(e.user.email,n)||(e.user.email=n),d(n)}),p(),a(15,"app-base-input",17,4),_("togglePassClick",function(){return m(s),d(e.passVisible())}),f("ngModelChange",function(n){return m(s),h(e.user.password,n)||(e.user.password=n),d(n)}),_("ngModelChange",function(){return m(s),d(e.checkPasswordMatch())}),p(),a(17,"app-base-input",18,5),_("togglePassClick",function(){return m(s),d(e.confirmPassVisible())}),f("ngModelChange",function(n){return m(s),h(e.user.confirmPassword,n)||(e.user.confirmPassword=n),d(n)}),_("ngModelChange",function(){return m(s),d(e.checkPasswordMatch())}),p(),a(19,"app-base-input",19),f("ngModelChange",function(n){return m(s),h(e.user.dinas,n)||(e.user.dinas=n),d(n)}),p()(),C(20,fe,4,0,"span",20),a(21,"div",21),C(22,_e,2,0,"app-white-button",22),a(23,"app-blue-button",23),g(24),p()()()()()}if(o&2){let s=q(3);l(4),r("pageTitle",e.pageTitle),l(),r("ngIf",e.isRegister&&e.registerMessage),l(2),c("ngModel",e.user.idNumber),l(2),r("ngIf",!e.isRegister),l(),r("ngIf",e.isRegister||e.selectedRole==="user"),l(),r("isRequired",!0),c("ngModel",e.user.name),r("restrictToPattern","^[a-zA-Z ]+$"),l(2),r("isRequired",!0),c("ngModel",e.user.email),r("email",!0)("disabled",!e.isCreate&&(!e.currentUser||e.currentUserRole!=="super admin")),l(2),r("type",e.isPassVisible?"text":"password")("isPassVisible",e.isPassVisible)("isRequired",e.isCreate),c("ngModel",e.user.password),r("required",e.isCreate),l(2),r("type",e.isConfirmPassVisible?"text":"password")("isPassVisible",e.isConfirmPassVisible)("isRequired",e.isCreate),c("ngModel",e.user.confirmPassword),r("required",e.isCreate)("customErrorMessage",e.mismatchErrorMessage),l(2),c("ngModel",e.user.dinas),l(),r("ngIf",e.isRegister),l(2),r("ngIf",!e.isRegister),l(),r("ngClass",e.isRegister?"submit":"")("disabled",s.invalid),l(),R(e.blueButtonLabel)}},dependencies:[k,ee,ie,ne,te,$,H,K,Q,J,X,Y,G,Z,D,W,B,j,se,re],styles:[".form-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;align-items:center;justify-content:center}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:75%;padding:0 2em}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%}.buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4em;width:100%;margin-top:2em}.button[_ngcontent-%COMP%]{width:190px;height:45px}.input[_ngcontent-%COMP%]{width:100%}.isRegistered[_ngcontent-%COMP%]{margin-top:25px;font-weight:700}.isRegistered[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#02507e}.error-message-container[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:red;margin-left:15px;margin-top:3px;font-size:14px}.success-message[_ngcontent-%COMP%]{background-color:#90ee90;padding:2px;margin-top:3px;color:#000}.register-message[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#90ee90;padding:2px;position:relative;top:1em;color:#000;font-weight:700}@media (max-width: 768px){.form[_ngcontent-%COMP%]{width:100%}}"]})}}return i})();export{se as a,We as b};
