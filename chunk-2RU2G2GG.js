import{c as m}from"./chunk-ERSWCUUE.js";import{R as o,W as d}from"./chunk-NHTCOLVS.js";var f=(()=>{class c{constructor(e){this.sweetalertService=e}alertError(e,t){let a=e?.error?.errors,n=e?.error?.message||e?.message,u=e?.status;if(n&&(n.includes("ETIMEDOUT")||n.includes("ECONNREFUSED")||n.includes("ESOCKET")||n.includes("connect"))){this.sweetalertService.alert("Berhasil","Operasi berhasil dilakukan. Link verifikasi akan dikirim ke email Anda.","success");return}if(u)switch(u){case 400:this.sweetalertService.alert("Pemberitahuan","Data tidak valid, periksa input Anda.","error");return;case 409:this.sweetalertService.alert("Pemberitahuan","Jadwal bertabrakan, silakan pilih waktu lain.","error");return;case 404:this.sweetalertService.alert("Pemberitahuan","Data tidak ditemukan.","error");return;case 429:let r=a||n||"Terlalu banyak permintaan. Silakan coba lagi nanti.";if(e?.error?.message)r=e.error.message;else if(e?.error?.retryAfter){let i=Number(e.error.retryAfter);if(!isNaN(i)){let l=Math.floor(i/60),s=i%60;r=l>0?`Terlalu banyak permintaan. Silakan coba lagi dalam ${l} menit${s>0?" "+s+" detik":""}.`:`Terlalu banyak permintaan. Silakan coba lagi dalam ${s} detik.`}}else if(e?.headers&&e.headers.get&&e.headers.get("Retry-After")){let i=Number(e.headers.get("Retry-After"));if(!isNaN(i)){let l=Math.floor(i/60),s=i%60;r=l>0?`Terlalu banyak permintaan. Silakan coba lagi dalam ${l} menit${s>0?" "+s+" detik":""}.`:`Terlalu banyak permintaan. Silakan coba lagi dalam ${s} detik.`}}this.sweetalertService.alert("Terlalu Banyak Permintaan",r,"error");return;case 500:this.sweetalertService.alert("Pemberitahuan","Server sedang sibuk atau terjadi gangguan. Silakan coba beberapa saat lagi.","error");return}if(this.isObject(a)||Array.isArray(a)){let r=this.formatErrors(a);this.hasRequiredFields(a,t||[])?this.sweetalertService.alert("Pemberitahuan","Kolom dengan tanda bintang (*) wajib diisi","error"):r&&this.sweetalertService.alert("Pemberitahuan",r,"error")}else typeof a=="string"?this.sweetalertService.alert("Pemberitahuan",a,"error"):this.sweetalertService.alert("Pemberitahuan","Server sedang sibuk atau terjadi gangguan. Silakan coba beberapa saat lagi.","error")}getErrorMessage(e,t){let a=e?.error?.errors,n=e?.error?.message||e?.message,u=e?.status;if(n&&(n.includes("ETIMEDOUT")||n.includes("ECONNREFUSED")||n.includes("ESOCKET")||n.includes("connect")))return"Register berhasil, link verifikasi akan dikirim ke email Anda";if(u)switch(u){case 400:return"Data tidak valid, periksa input Anda.";case 409:return"Jadwal bertabrakan, silakan pilih waktu lain.";case 404:return"Data tidak ditemukan.";case 429:let r=a||n||"Terlalu banyak permintaan. Silakan coba lagi nanti.";if(e?.error?.message)r=e.error.message;else if(e?.error?.retryAfter){let i=Number(e.error.retryAfter);if(!isNaN(i)){let l=Math.floor(i/60),s=i%60;r=l>0?`Terlalu banyak permintaan. Silakan coba lagi dalam ${l} menit${s>0?" "+s+" detik":""}.`:`Terlalu banyak permintaan. Silakan coba lagi dalam ${s} detik.`}}else if(e?.headers&&e.headers.get&&e.headers.get("Retry-After")){let i=Number(e.headers.get("Retry-After"));if(!isNaN(i)){let l=Math.floor(i/60),s=i%60;r=l>0?`Terlalu banyak permintaan. Silakan coba lagi dalam ${l} menit${s>0?" "+s+" detik":""}.`:`Terlalu banyak permintaan. Silakan coba lagi dalam ${s} detik.`}}return r;case 500:return"Server sedang sibuk atau terjadi gangguan. Silakan coba beberapa saat lagi."}if(this.isObject(a)||Array.isArray(a)){let r=this.formatErrors(a);if(r)return r;if(this.hasRequiredFields(a,t||[]))return"Kolom dengan tanda bintang (*) wajib diisi"}else if(typeof a=="string")return a;return"Server sedang sibuk atau terjadi gangguan. Silakan coba beberapa saat lagi."}formatErrors(e){return Array.isArray(e)?e.map(t=>t.field&&Array.isArray(t.messages)?`${t.field}: ${t.messages.join(", ")}`:t).filter(Boolean).join(`
`):this.isObject(e)?Object.entries(e).map(([t,a])=>`${t}: ${Array.isArray(a)?a.join(", "):a}`).join(`
`):null}hasRequiredFields(e,t){return!this.isObject(e)||t.length===0?!1:t.some(a=>e[a])}isObject(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}static{this.\u0275fac=function(t){return new(t||c)(d(m))}}static{this.\u0275prov=o({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();export{f as a};
