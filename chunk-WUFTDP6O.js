import{B as E,C as F,d as T,g as M,t as z,u as k}from"./chunk-3V2U2C6V.js";import{Gb as u,Ib as h,Na as a,Pb as I,Sa as _,Xa as x,aa as y,ab as C,ba as d,ca as m,f as P,hb as c,ib as v,jb as S,ka as O,kb as w,lb as L,mb as V,nb as o,ob as r,pb as g,sb as f,vb as s,wb as l}from"./chunk-VF5RWILG.js";function A(t,b){if(t&1){let e=f();o(0,"a",6),s("click",function(){d(e);let i=l(2);return m(i.closeMenu())}),u(1),r()}if(t&2){let e=l().$implicit;c("routerLink",e.routerLink),a(),h(" ",e.name," ")}}function N(t,b){if(t&1){let e=f();o(0,"a",6),s("click",function(){d(e);let i=l(2);return m(i.onLogout())}),u(1),r()}if(t&2){let e=l().$implicit;c("routerLink",e.routerLink),a(),h(" ",e.name," ")}}function U(t,b){if(t&1&&C(0,A,2,2,"a",5)(1,N,2,2,"a",5),t&2){let e=b.$implicit;S(e.routerLink?0:1)}}var D=(()=>{class t{constructor(e,n,i){this.authService=e,this.router=n,this.sweetalertService=i,this.isMenuVisible=!1,this.menuClose=new O,this.userProfileSubscription=null,this.sidebarMenu=[],this.currentUserProfile=null}ngOnInit(){this.userProfileSubscription=this.authService.userProfile$.subscribe(e=>{this.currentUserProfile=e,this.setMenuItems()})}ngOnChanges(e){e.isMenuVisible?.currentValue===!0&&this.setMenuItems()}ngOnDestroy(){this.userProfileSubscription&&this.userProfileSubscription.unsubscribe()}setMenuItems(){let e=this.currentUserProfile||JSON.parse(localStorage.getItem("user_profile")||"{}"),n=e?.role?.name,i=e?.id,p=e?.participant?.id;switch(n){case"user":this.sidebarMenu=[{name:"Dashboard",routerLink:"/dashboard"},{name:"Profile",routerLink:`/participants/${p}/profile/personal`},{name:"Capability",routerLink:"/capability"},{name:"My Class",routerLink:"/cot"},{name:"Logout"}];break;case"lcu":this.sidebarMenu=[{name:"Dashboard",routerLink:"/dashboard"},{name:"Profile",routerLink:`/users/${i}/profile`},{name:"Participants",routerLink:"/participants"},{name:"Capability",routerLink:"/capability"},{name:"COT",routerLink:"/cot"},{name:"Logout"}];break;case"supervisor":case"super admin":this.sidebarMenu=[{name:"Dashboard",routerLink:"/dashboard"},{name:"Profile",routerLink:`/users/${i}/profile`},{name:"Participants",routerLink:"/participants"},{name:"Capability",routerLink:"/capability"},{name:"COT",routerLink:"/cot"},{name:"User Role",routerLink:"/users"},{name:"E-Sign",routerLink:"/e-sign"},{name:"Logout"}];break;default:this.sidebarMenu=[]}}closeMenu(){this.isMenuVisible=!1,this.menuClose.emit()}onOverlayClick(){this.closeMenu()}onLogout(){this.closeMenu(),this.logout()}logout(){return P(this,null,function*(){(yield this.sweetalertService.confirm("Anda Yakin?","Apakah anda ingin keluar?","warning","Ya, keluar!"))&&(this.sweetalertService.loading("Mohon tunggu","Proses..."),this.authService.logout().subscribe({next:()=>{this.sweetalertService.close(),localStorage.clear(),this.authService.userProfile$.next(null),this.router.navigateByUrl("/login")},error:n=>{this.sweetalertService.close(),console.log("Logout failed",n)}}))})}static{this.\u0275fac=function(n){return new(n||t)(_(E),_(z),_(F))}}static{this.\u0275cmp=x({type:t,selectors:[["app-sidebar"]],inputs:{isMenuVisible:"isMenuVisible"},outputs:{menuClose:"menuClose"},features:[y],decls:8,vars:4,consts:[[1,"sidebar-overlay",3,"click"],[1,"sidebar",3,"click"],[1,"close-btn",3,"click"],[1,"fa-solid","fa-x"],[1,"nav-menu"],["routerLinkActive","active",3,"routerLink"],["routerLinkActive","active",3,"click","routerLink"]],template:function(n,i){n&1&&(o(0,"div",0),s("click",function(){return i.onOverlayClick()}),o(1,"div",1),s("click",function(H){return H.stopPropagation()}),o(2,"button",2),s("click",function(){return i.closeMenu()}),u(3," Tutup "),g(4,"i",3),r(),o(5,"nav",4),L(6,U,2,1,null,null,w),r()()()),n&2&&(v("visible",i.isMenuVisible),a(),v("visible",i.isMenuVisible),a(5),V(i.sidebarMenu))},dependencies:[k,M],styles:[".sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;visibility:hidden;opacity:0;transition:opacity .3s ease,visibility .3s ease;z-index:999}.sidebar-overlay.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-300px;width:300px;height:100%;background-color:#02507e;padding:32px;transition:right .3s ease;z-index:1000;overflow-y:auto}.sidebar.visible[_ngcontent-%COMP%]{right:0}.nav-menu[_ngcontent-%COMP%]{margin-top:5em;display:flex;flex-direction:column;gap:24px}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px;font-weight:500;border-radius:8px;padding:12px 16px}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.5;background-color:#ffffff1a;transition:background-color .3s ease,color .3s ease}.nav-menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#3e799b}.close-btn[_ngcontent-%COMP%]{position:absolute;top:32px;right:32px;background:none;border:none;border-radius:8px;color:#fff;font-size:24px;cursor:pointer;transition:opacity .3s ease;display:flex;align-items:center;padding:8px 16px;gap:8px}.close-btn[_ngcontent-%COMP%]:hover{opacity:.5;background-color:#ffffff1a;transition:background-color .3s ease,color .3s ease}.close-btn[_ngcontent-%COMP%]:active{color:#3e799b}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:240px;padding:24px}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px;padding:10px 14px}.close-btn[_ngcontent-%COMP%]{font-size:20px;padding:6px 14px}}"]})}}return t})();var j=t=>["/users",t,"profile"];function R(t,b){if(t&1){let e=f();o(0,"header",2)(1,"div",3),g(2,"img",4),o(3,"div",5)(4,"a",6),u(5),r()()(),o(6,"div",7)(7,"h1",8),s("click",function(){d(e);let i=l();return m(i.toggleMenu())}),o(8,"span"),u(9,"Menu "),r(),g(10,"i",9),r()()()}if(t&2){let e=l();a(4),c("routerLink",I(2,j,e.userId)),a(),h(" Halo, ",e.userName,"!")}}var re=(()=>{class t{constructor(){this.isMenuVisible=!1,this.shouldShowHeader=!0,this.userProfile=JSON.parse(localStorage.getItem("user_profile")??"{}")}get userName(){return this.userProfile.name??"Pengguna"}get userId(){return this.userProfile.id??""}toggleMenu(){this.isMenuVisible=!this.isMenuVisible}onMenuClose(){this.isMenuVisible=!1}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=x({type:t,selectors:[["app-header"]],decls:2,vars:2,consts:[["class","header",4,"ngIf"],[3,"menuClose","isMenuVisible"],[1,"header"],[1,"left-section"],["routerLink","/dashboard","src","assets/image/logo-GMF.png","alt","logo","aria-hidden","true",1,"header-logo"],[1,"greeting"],[1,"greeting-link",3,"routerLink"],[1,"right-section"],["aria-label","Toggle menu",1,"menu",3,"click"],[1,"fa-solid","fa-bars"]],template:function(n,i){n&1&&(C(0,R,11,4,"header",0),o(1,"app-sidebar",1),s("menuClose",function(){return i.onMenuClose()}),r()),n&2&&(c("ngIf",i.shouldShowHeader),a(),c("isMenuVisible",i.isMenuVisible))},dependencies:[k,D,M,T],styles:["[_ngcontent-%COMP%]:root{--primary-color: #02507e;--secondary-color: #3e799b;--text-color: #ffffff;--hover-bg: rgba(255, 255, 255, .1)}.header[_ngcontent-%COMP%]{background-color:#02507e;border-bottom-right-radius:30px;border-bottom-left-radius:30px;display:flex;justify-content:space-between;align-items:center;padding:10px 20px;height:80px;width:100%;box-sizing:border-box;box-shadow:0 2px 5px #0000001a}.left-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px}.greeting[_ngcontent-%COMP%]{padding-left:17px;padding-right:2px;font-family:Petrona,Arial,sans-serif;font-size:12px;font-weight:600;color:#fff;text-align:center}.greeting-link[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.greeting-link[_ngcontent-%COMP%]:hover{opacity:.5;background-color:#ffffff1a;padding:5px 10px;border-radius:4px;transition:opacity .3s ease,background-color .3s ease}.header-logo[_ngcontent-%COMP%]{width:8em;height:auto;cursor:pointer}.right-section[_ngcontent-%COMP%]{display:flex;align-items:center}.menu[_ngcontent-%COMP%]{font-size:1.5em;color:#fff;padding:8px 16px;border-radius:8px;cursor:pointer}.menu[_ngcontent-%COMP%]:hover{opacity:.5;background-color:#ffffff1a;transition:background-color .3s ease,color .3s ease}.menu[_ngcontent-%COMP%]:active{color:#3e799b}@media (min-width: 425px){.header[_ngcontent-%COMP%]{padding:15px 40px;height:120px}.header-logo[_ngcontent-%COMP%]{width:10em}.greeting[_ngcontent-%COMP%]{font-size:16px}.menu[_ngcontent-%COMP%]{font-size:1.75em}}@media (min-width: 768px){.header[_ngcontent-%COMP%]{padding:20px 70px;height:150px}.header-logo[_ngcontent-%COMP%]{width:15em}.greeting[_ngcontent-%COMP%]{font-size:19px}.menu[_ngcontent-%COMP%]{font-size:2em}.left-section[_ngcontent-%COMP%]{gap:20px}}@media (max-width: 320px){.menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"]})}}return t})();export{re as a};
